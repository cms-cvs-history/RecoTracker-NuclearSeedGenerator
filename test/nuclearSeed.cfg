process Demo =  {
    service = MessageLogger
    {
                untracked vstring destinations = { "cout", "nuclearseeding" } # .log automatically
              #  untracked vstring statistics = { "cout", "nuclearseeding"}

                untracked vstring categories = { "NuclearSeedGenerator", "NuclearInteractionFinder" }

                untracked PSet nuclearseeding    = { 
                        untracked string threshold = "DEBUG" 
                        untracked PSet DEBUG = { untracked int32 limit = 0 }
                        untracked PSet NuclearSeedGenerator = { untracked int32 limit = -1}
                        untracked PSet NuclearInteractionFinder = { untracked int32 limit = -1}
                        untracked bool noLineBreaks = true 
                }
                untracked vstring debugModules = { "nuclearSeed" }

                untracked PSet cout  = { 
                        untracked string threshold = "INFO" 
                        untracked PSet INFO = { untracked int32 limit = 0 }
                        untracked PSet WARNING = { untracked int32 limit = 0 }
                        untracked PSet ERROR = { untracked int32 limit = 0 }
                        untracked PSet DEBUG = { untracked int32 limit = 0 }
                        untracked bool noLineBreaks = true 
                }

    }
    
    source = PoolSource 
    { 
      untracked int32 maxEvents=150
      untracked vstring fileNames = { 
#                 'file:/home/roberfro/links/mass3/CMSSW_1_3_0_pre2/pi1to200gev10.root',
#                 'file:/home/roberfro/links/mass3/CMSSW_1_3_0_pre2/pi1to200gev12.root',
#                 'file:/home/roberfro/links/mass3/CMSSW_1_3_0_pre2/pi1to200gev13.root',
                 'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev14.root',
                 'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev15.root',
                 'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev16.root',
                 'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev17.root',
#                 'file:/home/roberfro/links/mass3/CMSSW_1_3_0_pre2/pi1to200gev18.root',
                 'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev19.root'}
#                  'file:/afs/cern.ch/user/r/roberfro/scratch0/CMSSW_1_3_0_pre2/src/Config/test/pi1to200gev19.root'}
    }

    # For Debugging :
    #---------------
    #Tracking truth
    include "SimGeneral/TrackingAnalysis/data/trackingtruth.cfi"
    replace trackingtruth.HepMCDataLabels = {"source"}
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    #---------------

    #Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"

    # Refitter
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
    replace TrackRefitter.TrajectoryInEvent = true

    # Nuclear Seeding
    include "RecoTracker/NuclearSeedGenerator/data/NuclearSeed.cff"

    # defines ckftracks and rstracks
    include "RecoTracker/Configuration/data/RecoTracker.cff" 
    replace CkfTrajectoryBuilder.minimumNumberOfHits = 3
    replace CkfTrajectoryBuilder.ptCut = 0.4
    replace ckfTrackCandidates.SeedProducer = "nuclearSeed"

   module dump = EventContentAnalyzer{}

   module Out = PoolOutputModule
   {
     untracked string fileName = "pi1to200gev_after.root"
   }

   #path p = {TrackRefitter, nuclearSeed} 

   # for debugging :
   #path p = {TrackRefitter, trackingtruth, nuclearSeed} 
   path p = {TrackRefitter, trackingtruth, nuclearSeed, ckfTrackCandidates, ctfWithMaterialTracks} 
   #path p = {TrackRefitter} 
   # path p = { dump }

   endpath e = 
   {
     Out
   }
}
